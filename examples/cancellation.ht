import stdlib

func main(clock: Clock): Clock {
	// Despite nominally sleeping for two seconds, this program will complete
	// in one second, since we only wait for the first Clock object to
	// complete.
	let a, b = fork(clock)

    let c, d = fork(a)
	sleep(&c)
	sleep(&c)
	let a = join(c, d)

	sleep(&b)

	let first, second = first(a, b)
	return join(first, second)
}
